{% extends 'MunicipalesBundle:theme:layout.html.twig' %}

{% block title %}{{ 'town.step7.html_title'|trans }}{% endblock %}

{% from 'MunicipalesBundle:macros:steps.html.twig' import steps_town_widget %}
{% form_theme form 'MunicipalesBundle:theme:forms.html.twig' %}

{% block content %}
<section class="section-2">
      <div class="container marketing">

        <div class="headline">
          <h2>{{ 'home.step_h2'|trans }} 7</h2>
        </div><h3 class="featurette-headin"> <i>{{ 'town.step7.h1_title'|trans }}</i>
        </h3>
        
        <!-- START THE FEATURETTES -->

        <hr class="featurette-divider2">
        <!--    division -->
        
        {{ form_start(form, { 'attr': {'class': 'form_settings', 'id': 'town_step7'}}) }}
        
        <div class="row featurette2">
          <div class="widget-box">
            

            <div class="widget-body">
              <div class="widget-main">
              
              	
              	
                <div id="fuelux-wizard-container">
                  {{ steps_town_widget(7) }}
                  
				  <hr>

                  <div class="step-content pos-rel">
                  
				  {% if not form.vars.valid and form.vars.errors|length > 0 %}
                  <div class="alert alert-danger">
                          <button data-dismiss="alert" class="close" type="button">
                            <i class="mine-icon fa fa-times"></i>
                          </button>
                          {{ form_errors(form) }}
                  </div>
                  {% endif %}
                          
                    <div data-step="1" class="step-pane active row">
                      <h2 class="lighter block greenl col-xs-10 col-sm-offset-1">{{ 'town.step7.h1_title'|trans }}</h2>
                      
                      <div class="col-sm-offset-1 col-md-10 well">

						<p class="lead2">
							{# 
							
							Sugerencia de algoritmo para la selección de candidatos:
					
							Comenzar el filtro desde el “más importante” al “menos importante” 
							hasta que quede un número de candidatos de X
							#}
			
							{% if candidates|length > 0 %}
						    	<table class="table">
						    		<tr>
						    			<td>Nombre y Apellidos</td>
						    			<td>Texto motivacional</td>
						    			<td>Explicación actividades municipales</td>
						    			<td>Información adicional</td>
						    			<td>Foto</td>
						    			<td>Asignar puntos</td>
						    		</tr>
								{% for candidate in candidates %}
									<tr>
										<td>{{ candidate.name }} {{ candidate.lastname }}</td> 
										<td>{% if candidate.motivationText is defined %}{{ candidate.motivationText }}{% endif %}</td> 
										<td>{% if candidate.townActivitiesExplanation is defined %}{{ candidate.townActivitiesExplanation }}{% endif %}</td> 
										<td>{% if candidate.additionalInfo is defined %}{{ candidate.additionalInfo }}{% endif %}</td> 
										<td style="padding:5px"><img style="width:45px;height:45px" src="{{ app.request.schemeAndHttpHost }}/{{ documents_path }}{{ candidate.id }}/photo/photo.jpg" /></td>       
										<td style="padding:5px">
											{% if candidate.status == 1 %}
												<select required="required" name="town_step_7[candidate_{{ candidate.id }}]" id="candidate_{{ candidate.id }}">
													{% for index in 1..candidates|length  %}
														<option>{{ index }}</option>
													{% endfor %}
												</select>
											{% endif %}
										</td>   
									</tr>
								{% endfor %}
								</table>
							{% else %}
								{{ 'candidacy.step6.no_candidates'|trans }}
							{% endif %}
			
						</p>
			          
			        </div>

                      
                    </div>
                  </div>
                </div>

                <hr>
                <div class="wizard-actions">

				  <button class="btn btn-prev" onclick="location.href='{{ path('town_candidacy_vote_step6', {'address' : address }) }}'; return false;">
                    <i class="mine-icon fa fa-arrow-left"></i>
                    {{ 'town.step7.previous'|trans }}
                  </button>
                  
                  {{ form_widget(form.continue, { 'label': 'town.step7.continue'|trans|raw, 'attr' : { 'class' : 'submit btn btn-success btn-next'} }) }}

                </div>
              </div>
              
              
              <!-- /.widget-main --> </div>
            <!-- /.widget-body --> </div>
        </div>

        {{ form_rest(form) }}
			
		{{ form_end(form) }}
			  
        <!--    division -->

        <!-- /END THE FEATURETTES --> </div>
        
</section>
{% endblock %}